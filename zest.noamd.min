(function(e,t){var n=typeof module!="undefined"&&module.config();var r=typeof n!="undefined"&&n.typeAttribute||"component";var i=function(){return i.main.apply(this,arguments)};this.$z=i;i._controllers={};i._elements={};i._global=null;i.main=i.$z=function(e,t,n){e=e||"*";t=t||this.$$||document.body;var s=e.substr(e.length-2,2)=="[]";if(s)e=e.substr(0,e.length-2);var o=e.substr(0,e.indexOf(" "))||e;var u=o.split("#");var a=(u[0]!=""&&u[0]!="*"?"["+r+"="+u[0]+"]":"["+r+"]")+(u[1]?"#"+u[1]:"");var f=i.$(a,t);var l=[];var c;if(o==e){for(var h=0;h<f.length;h++){if(c=i._elements[f[h].id])l[h]=!n&&i._controllers[f[h].id]||c;else l[h]=f[h]}if(f.length==1&&!s)return l[0];else return l}var p=[];for(var h=0;h<f.length;h++){if(c=i._elements[f[h].id])p=p.concat(c);else p.push(f[h])}return i.$z(e.substr(o.length+1),p)};i.$=function(t,n){n=n||this.$$||document;if(n.nodeType)return e(t,n);matches=e(t,n[0].parentNode);var r;if(matches instanceof NodeList)r=[];else r=e("");for(var i=0;i<matches.length;i++){var s=matches[i];e:while(s&&s!=document.body){for(var o=0;o<n.length;o++)if(n[o]==s){r.push(matches[i]);break e}s=s.parentNode}}return r};i.render=function(e,t,n,r){if(typeof n=="function"){r=n;n=t;t={}}t=t||{};t.global=t.global||i._global;var s=i.render.Buffer();var o=function(){i.render.Buffer(n.length?n[0]:n).write(s);if(r)r()};if(typeof e=="string"){require([e],function(e){i.render.renderItem(e,t,s.write,o)})}else i.render.renderItem(e,t,s.write,o)};i._nextComponentId=1;i.render.renderItem=function(e,t,n,r){if(r===undefined){r=n;n=t;t=null}r=r||function(){};if(typeof e=="undefined"||e==null)return r();t=t||{};t.global=t.global||{};var s=this;if(typeof e=="string")s.renderTemplate(e,null,t,n,r);else if(typeof e=="function"&&!e.render){if(e.length==2)e(t,function(e){s.renderItem(e,{global:t.global},n,r)});else{e=e(t);if(typeof e=="string")s.renderTemplate(e,null,t,n,r);s.renderItem(e,{global:t.global},n,r)}}else if(e instanceof Array)s.renderArray(e,{global:t.global},n,r);else if(e.render)s.renderComponent(e,t,n,r);else{i.dir(e);throw"Unrecognised structure item for render."}};i.render.renderArray=function(e,t,n,r){var i=0;var s=this;var o=function(){if(i==e.length){r();return}s.renderItem(e[i++],{global:t.global},n,function(){o()})};o()};i.render.renderTemplate=function(t,n,r,s,o){var u;var a=t.match(/\{\`\w+\`\}/g);if(a)for(var f=0;f<a.length;f++){var l=a[f];var c=l.substr(2,l.length-4);a[f]=c;var h=t.match(new RegExp("(</(\\w*)[^>]*>|<(\\w*)[^>]*/>)\\s*"+l));h=h&&(h[2]||h[3])||"span";var p=t.match(new RegExp("<(\\w*)[^>]*>\\s*"+l));p=p&&p[1]||"div";var d=h||"span";if(p=="tbody")d="tr";t=t.replace(l,"<"+d+' style="display: none;" region-placeholder='+c+"></"+d+">");delete l}var v=i.render.Buffer();v.write(t);var m={};if(a)for(var f=0;f<a.length;f++){var l=a[f];var g;for(var y=0;y<v.container.childNodes.length;y++){var b=v.container.childNodes[y];if(b.getAttribute&&b.getAttribute("region-placeholder")==l){g=b;break}if(b.nodeType==1){var w=e("[region-placeholder="+l+"]",b);if(w.length>0){g=w[0];break}}}m[l]=g}u=v.toArray();s(v);if(!a)return o(u);var E=0;for(var f=0;f<a.length;f++)(function(e,t){var s=n&&n[e]||r[e];var f=u.indexOf(t);i.render.renderItem(s,r,function(e){var n=i.render.Buffer();n.write(e);if(n.container)while(n.container.childNodes.length>0){if(f!=-1)u.splice(f,0,n.container.childNodes[0]);t.parentNode.insertBefore(n.container.childNodes[0],t)}},function(){t.parentNode.removeChild(t);if(f!=-1)u.splice(f,1);E++;if(E==a.length)o(u)})})(a[f],m[a[f]])};i.render.renderComponent=function(e,t,n,s){if(e.options)for(var u in e.options){if(t[u]===undefined)t[u]=e.options[u]}var a=this;var f=function(){t.type=t.type||e.type;var u;var f=t.id;var l=t.type;delete t.id;delete t.type;var c=function(n){if(f){if(i._elements[f])throw"Id "+f+" already defined!";n[0].id=f}if(l){if(!n[0].getAttribute(r))n[0].setAttribute(r,l)}if(!e.attach)return s();if(f===undefined){f="z"+i._nextComponentId++;if(i._elements[f])throw"Id "+f+" already has an attachment defined!";n[0].id=f}if(l===undefined){if(!n[0].getAttribute(r))n[0].setAttribute(r,l="")}i._elements[f]=n;var u=e.pipe?e.pipe(t)||{}:{};u.global=t.global;var a=function(e){if(!e)return s();var t=e.dispose;if(!t||t&&!e.dispose.length&&!t.fns){e.dispose=function(e){if(!e)return i.dispose(n);if(t)t()}}i._controllers[f]=e;s()};if(typeof e.attach==="string"){var c=e.attach;var h=i.getModuleId(e);if(h){var p=o.makeModuleMap(h,null,false,false);c=o.makeModuleMap(c,p,false,true).id}require([c],function(e){a(e(u,n))})}else a(e.attach(u,n))};if(typeof e.render=="function"&&!e.render.render&&e.render.length==1){var h=e.render(t);if(typeof h=="string")a.renderTemplate(h,e,t,n,c);else a.renderItem(h,{global:t.global},n,c)}else a.renderItem(e.render,t,n,c)};if(e.load){if(e.load.length==1){e.load(t);f()}else e.load(t,f)}else f()};var s=function(e){if(e=="tr")return"tbody";return"div"};i.render.Buffer=function(e){if(e&&e.constructor==i.fn)throw"Its a $z fn!";var t={};t.container=e;t.toArray=function(){var e=[];for(var t=0;t<this.container.childNodes.length;t++)e.push(this.container.childNodes[t]);return e};t.write=function(e){if(typeof e=="string"){var n=e.match(/<(\w*)[^>]*>/);n=n&&n[1]||"div";var r=document.createElement(s(n));r.innerHTML=e;t.write({write:true,container:r})}else if(e.write){if(!t.container&&e.container.childNodes[0]){var n=(e.container.childNodes[0].tagName||"span").toLowerCase();t.container=document.createElement(s(n))}while(e.container.childNodes.length>0)t.container.appendChild(e.container.childNodes[0])}else if(e.nodeType){t.container=t.container||document.createElement(s(e.tagName.toLowerCase()));t.container.appendChild(e)}else if(e.length){if(!t.container&&e[0]){t.container=document.createElement(e[0].tagName.toLowerCase())}for(var i=0;i<e.length;i++)t.container.appendChild(e[i])}};return t};if(typeof requirejs!="undefined"){var o=null;var u;e:for(var a in requirejs.s.contexts){u=requirejs.s.contexts[a].defined;for(var f in u)if(u[f]==e){o=a;break e}}if(!o)throw"Unable to detect RequireJS context.";i.getModuleId=function(e,t){var n;if(e==null)return n;for(var r in u){if(u[r]==e)n=r;else if(t!==false&&u[r]&&e._definition==u[r])n=r}return n}}i.getComponent=function(e){if(e.nodeType!==1){if(typeof e[0]=="object"&&e[0]!==null){if(e[0].nodeType!==1)return null;e=e[0]}}if(i._controllers[e.id])return i._controllers[e.id];if(!e.previousSibling&&e.parentNode==document.body)return;var t=e;var n;while(t=t.previousSibling){if(i._controllers[t.id]){var n=i._elements[t.id];for(var r=0;r<n.length;r++)if(n[r]==e)return i._controllers[t.id]}}return i.getComponent(e.parentNode)};i.dispose=function(e){if(e.nodeType)e=e.childNodes;var t=i("*[]",e);for(var n=0;n<t.length;n++){var r=t[n];if(r&&r.dispose&&!r._disposed){r.dispose(true);r._disposed=true}for(var s in i._controllers){if(i._controllers[s]==r){delete i._controllers[s];delete i._elements[s];break}}for(var s in i._elements){if(i._elements[s]==r){delete i._elements[s];break}}}for(var n=e.length-1;n>=0;n--)if(e[n].parentNode)e[n].parentNode.removeChild(e[n])};return i})(window.jQuery||document.querySelectorAll,window);(function(e){e.log=e.dir=function(){};if(typeof console!=="undefined"){if(console.log)e.log=function(e,t){console.log(e)};if(console.dir)e.dir=function(e,t){console.dir(e)}}var t=e.fn=function(e,o){if(e instanceof Array){o=e;e=null}var u=function(){return u.run(u._this||this,Array.prototype.splice.call(arguments,0),u.fns)};u.constructor=t;u.fns=o||[];u.run=(typeof e=="string"?t[e]:e)||t.LAST_DEFINED;u.on=r;u.off=i;u.first=s;u._this=undefined;u.bind=n;return u};var n=function(e){this._this=e;return this};var r=function(e){this.fns.push(e);return this};var i=function(e){if(!e){this.fns=[];return}for(var t=0;t<this.fns.length;t++)if(this.fns[t]==e){this.fns.splice(t,1);return}};var s=function(e){this.fns=[e].concat(this.fns);return this};t.executeReduce=function(e,t){if(t===undefined){t=e;e=undefined}return function(n,r,i){var s=e;for(var o=0;o<i.length;o++)s=t(s,i[o].apply(n,r));return s}};var o=t.LAST_DEFINED=t.executeReduce(function(e,t){return t!==undefined?t:e});t.STOP_DEFINED=function(t,n,r){var i;for(var s=0;s<r.length;s++){i=r[s].apply(t,n);if(i!==undefined)return i}return i};t.COMPOSE=function(t,n,r){if(r.length==0)return;var i=r[0].apply(t,n);for(var s=1;s<r.length;s++)i=r[s].call(t,i);return i};t.ASYNC=t.ASYNC_NEXT=function(t,n,r){var i=0;var s;if(typeof n[n.length-1]=="function")s=n.pop();var o=function(e){return function(){if(r[e])r[e].apply(t,n.concat([o(e+1)]));else if(s)s()}};return o(0)()};t.ASYNC_SIM=function(t,n,r){var i=0;var s;if(typeof n[n.length-1]=="function")s=n.pop();for(var o=0;o<r.length;o++)r[o].apply(t,n.concat([function(){if(++i==r.length)s()}]))};e.on=function(e,n,r){var i=e[n];if(!i||i.constructor!=t||i.run!=t.LAST_DEFINED)e[n]=t(i?[i]:[]);e[n].on(r)};e.off=function(e,n,r){if(e[n].constructor==t)return e[n].off(r)};var u=e.extend=function(n,r,i){var s=arguments;if(s.length>2)i=s[s.length-1];var o;if(typeof i=="object"){o=i;i=void 0}for(var a in r)if(!r.hasOwnProperty||r.hasOwnProperty(a)){var f=r[a];var l;var c=a.length;var h=a.substr(0,2)=="__";var p=a.substr(c-2,2)=="__";var d=h&&!p&&(a=a.substr(2))&&u.APPEND||!h&&p&&(a=a.substr(0,c-2))&&u.PREPEND||h&&p&&(a=a.substr(2,c-4))&&u.REPLACE;var v=d||i||o&&(o[a]||o["*"])||u.DEFINE;if(typeof v=="string")v=u[v];try{l=v(n[a],f,o&&u.deriveRules(o,a))}catch(m){e.dir(n);e.dir(r);e.dir(u.deriveRules(i,a));e.log('zoe.extend: "'+a+'" override error. \n ->'+(m.message||m))}if(l!==undefined)n[a]=l}if(s.length>3){var g=[n];g.concat(Array.prototype.splice.call(s,2,s.length-3,s.length-3));g.push(i);$z.extend.apply(this,g)}return n};u.EXTEND=u;u.DEFINE=function(t,n){if(t!==undefined)throw"No override specified.";else return n};var a=u.REPLACE=function(t,n){if(n!==undefined)return n;else return t};u.FILL=function(t,n){if(t===undefined)return n;else return t};var f=u.IGNORE=function(t,n){};var l=function(e){return e!=null&&e.constructor==Object};var c=function(e){return typeof e=="function"};var h=function(e){return typeof e=="string"};var p=function(e){return e instanceof Array};u.APPEND=function(t,n,r){if(l(n))return u(t||{},n,u(r||{},{"*":"REPLACE"},"FILL"));else if(c(n))return u.CHAIN(t,n);else if(h(n))return u.STR_APPEND(t,n);else if(p(n))return u.ARR_APPEND(t,n);else return n};u.PREPEND=function(t,n,r){if(l(n))return u(t||{},n,u(r||{},{"*":"FILL"},"FILL"));else if(c(n))return u.CHAIN_FIRST(t,n);else if(h(n))return u.STR_PREPEND(t,n);else if(p(n))return u.ARR_PREPEND(t,n);else return t===undefined?n:t};u.DAPPEND=function(t,n,r){if(l(n))return u(t||{},n,u(r||{},{"*":"DAPPEND"},"FILL"));else if(c(n))return u.CHAIN(t,n);else if(p(n))return u.ARR_APPEND(t,n);else return n};u.DPREPEND=function(t,n,r){if(l(n))return u(t||{},n,u(r||{},{"*":"DPREPEND"},"FILL"));else if(c(n))return u.CHAIN_FIRST(t,n);else if(p(n))return u.ARR_PREPEND(t,n);else return t!==undefined?t:n};u.DREPLACE=function(t,n,r){if(l(n))return u(t||{},n,u(r||{},{"*":"DREPLACE"},"FILL"));else return n};u.DFILL=function(t,n,r){if(l(n))return u(t||{},n,"DFILL");else return typeof t=="undefined"?n:t};u.ARR_APPEND=function(t,n){return(t||[]).concat(n)};u.ARR_PREPEND=function(t,n){return n.concat(t||[])};u.STR_APPEND=function(t,n){return t?t+n:n};u.STR_PREPEND=function(t,n){return n+t};u.deriveRules=function(e,t){var n={};for(var r in e){if(r=="*.*"){n["*.*"]=e[r];continue}if(r=="*")continue;var i=r.split(".");if(i[0]==t||i[0]=="*")n[i.splice(1).join(".")]=e[r]}return n};u.makeChain=function(e,n){if(typeof e=="string")e=t[e];return function(r,i){if(!r||r.constructor!=t||r.run!=e)r=t(e,!r?[]:[r]);if(n)r.first(i);else r.on(i);return r}};u.CHAIN=u.makeChain(t.LAST_DEFINED);u.CHAIN_FIRST=u.makeChain(t.LAST_DEFINED,true);u.CHAIN_STOP_DEFINED=u.makeChain(t.STOP_DEFINED);u.CHAIN_COMPOSE=u.makeChain(t.COMPOSE);e.create=function(e,n){n=v(e,n);if(n._definition)throw"Cannot use zoe.create on an instance of zoe.create";var r;d(n,function(e){if(e._base){r=e._base(n);return true}});r=r||{};r._definition=n;var i={_extend:u.IGNORE,_base:u.IGNORE,_implement:u.IGNORE,_reinherit:u.IGNORE,_make:u.IGNORE,_integrate:u.IGNORE,_built:u.IGNORE};var s=[];var o=t();var a=t();a._this=o._this=r;d(n,function(t){t=a(t,n)||t;if(t._integrate)a.on(t._integrate);if(t._extend)u(i,t._extend,"REPLACE");u(r,t,i);if(t._make)t._make.call(r,n,t);if(t._built)o.on(t._built);s.push(t)},function(t){return s.indexOf(t)!=-1&&!t._reinherit});o(n);return r};var d=function(t,n,r){r=r||function(){};if(t._implement)for(var i=0,s=t._implement.length;i<s;i++){var o=t._implement[i];if(!o){e.dir(t);e.log("Implementor not defined!")}if(o._definition){o=o._definition}if(r(o))continue;if(d(o,n,r))return true}return n(t)};var v=function(e,t){if(!(e instanceof Array)){t=e;e=[]}t=t||{};t._implement=e.concat(t._implement||[]);return t};e.inherits=function(t,n){if(t._definition)return e.inherits(t._definition,n);if(n._definition)return e.inherits(t,n._definition);var r=false;d(t,function(e){if(e===n){r=true;return true}});return r};e.Constructor={_base:function(e){function t(){t.construct.apply(this,arguments)}return t},_extend:{prototype:u,construct:u.CHAIN},_integrate:function(e){var t=Object.getOwnPropertyDescriptor;if(t){var n=t(e,"prototype");if(n&&!n.enumerable)u(this.prototype,e.prototype,u.deriveRules(this._extend,"prototype"))}if(typeof e=="function"&&!e._definition)return{construct:e.construct,prototype:e}},construct:function(){for(var e in this){var n=this[e];if(n&&n.constructor==t){this[e]=t(n.run,[n]);this[e].bind(this)}}}};return e})($z);(function(e,t){e.fn.STOP_FIRST_DEFINED=function(e,t,n){var r=n[0].apply(e,t);if(r!=="undefined")return;for(var i=1;i<n.length;i++)n[i].apply(e,t)};var n={_implement:[e.Constructor],_extend:{options:"APPEND",type:"REPLACE",pipe:"CHAIN",load:e.extend.makeChain("ASYNC"),"prototype.dispose":e.extend.makeChain(e.fn.STOP_FIRST_DEFINED)},attach:function(e,t){return new this(e,t)},construct:function(e,n){if(!n)return t.render(this.constructor,e,document.createDocumentFragment());this.o=e;this.$$=n},_unbind:true,prototype:{$:t&&t.$,$z:t&&t.$z,dispose:function(e){if(!e){t.dispose(this.$$);return true}if(this.constructor._unbind&&t.$.fn&&t.$.fn.jquery)this.$("*").unbind();delete this.$$}}};return n})($z,$z);$z.esc=function(){var e=function(t,n){var r=Array.prototype.splice.call(arguments,2,arguments.length-2);r.unshift(t);return e[n](r)};e.num=function(e,t){var n=parseFloat(e);if(isNaN(n))return t;else return n+""};e.attr=function(e){return e.replace(/</g,"<").replace(/>/g,">").replace(/&/g,"&").replace(/"/g,""").replace(/'/g,"&#39;")};e.htmlText=function(e){return(e+"").replace(/&/g,"&").replace(/"/g,""").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F").replace(/</g,"<").replace(/>/g,">")};e.strVar=function(e){return(e+"").replace(/"/g,""").replace(/'/g,"&#39;").replace(/<\//,"<\\/")};e.cssAttr=function(e){return(e+"").replace(/;/g,"")};e.json=function(e){return str.replace(/<\//,"<\\/")};e.html=function(t,n,r){var i=["cite","href","poster","src"];n=n||["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","footer","h1","h2","h3","h4","h5","h6","header","group","hr","i","img","input","ins","label","legend","li","map","mark","menu","meter","nav","nobr","noscript","ol","optgroup","option","p","pre","progress","q","rp","rt","ruby","s","samp","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","video","wbr"];r=r||["align","alt","autocomplete","autofocus","autoplay","bgcolor","border","buffered","checked","cite","class","color","cols","colspan","contenteditable","contextmenu","controls","coords","datetime","default","dir","dirname","disabled","for","headers","height","hidden","high","href","hreflang","id","ismap","itemprop","lang","list","loop","low","max","maxlength","media","min","multiple","name","open","optimum","pattern","ping","placeholder","poster","preload","pubdate","readonly","rel","required","reversed","rows","rowspan","spellcheck","scope","selected","shape","size","span","src","srclang","start","step","summary","tabindex","target","title","type","usemap","value","width","wrap"];var s;var o=/<[^\s><\/]+/g;var u=/<\/[^\s><\/]+/g;var a=/^\s*([^\s="'>]+)(=("([^"\\]*(\\.[^"\\]*)*)"|\'([^\'\\]*(\\.[^\'\\]*)*)\'|[^\s>]*))?/;while(s=o.exec(t)){if(n.indexOf(s[0].substr(1))==-1)t=t.substr(0,s.index)+"<"+t.substr(s.index+1);else{var f=t.substr(0,s.index)+s[0];var l=t.substr(s.index+s[0].length);var c;while(c=a.exec(l)){var h;if(r.indexOf(c[1])!=-1){var h=c[6]!==undefined?c[6]:c[4]!==undefined?c[4]:c[3]!==undefined?c[3]:undefined;if(h!==undefined)f+=" "+c[1]+'="'+(i.indexOf(c[1])!=-1?e.url(h):e.attr(h))+'"';else f+=" "+c[1]}l=l.substr(c.index+c[0].length)}var p=l.match(/\s*\/?>/);if(!p)return f+">";if(p[1])f+=" />";else f+=">";o.lastIndex=f.length;t=f+l.substr(p[0].length)}}while(s=u.exec(t))if(n.indexOf(s[0].substr(2))==-1)t=t.substr(0,s.index)+"<"+t.substr(s.index+1);return t};e.uriComponent=function(e){return encodeURIComponent(e)};e.url=function(e){if(e.substr(0,11)=="javascript:")return"javascript:void(0)";return e};return e}()